# Card Battle Game

シンプルなカードバトルゲームです。5x5のフィールドに味方と敵のカードを配置して戦います。

## 技術スタック

- Next.js 14
- TypeScript
- Tailwind CSS
- Framer Motion

## ゲーム概要

### 基本ルール
- 5x5のフィールドに味方と敵のカードを配置して戦うゲームです
- 各カードには点数が設定されており、味方カードは味方スコアを、敵カードは敵スコアを上昇させます
- すべてのマスにカードを配置し終えた時点で、味方スコアが敵スコアを上回っていればクリアです

### ゲームの進行
1. 1ターン目
   - 基本ユニットカード（民兵、剣士、弓兵など）をランダムに4枚引いて手札とします
   - 味方2枚、敵2枚のカードが与えられます

2. 2ターン目
   - 効果付きカード（騎士、槍兵、魔術師など）をランダムに4枚引いて手札とします
   - 味方2枚、敵2枚のカードが与えられます
   - 各カードには特殊な効果があり、配置や周囲のカードとの関係で効果を発揮します

3. 3ターン目
   - フィールドカード（要塞、魔界門など）をランダムに2枚引いて手札とします
   - 味方1枚、敵1枚のカードが与えられます
   - 広範囲に効果を及ぼすカードで、戦局を大きく変えることができます

### カードの効果
#### 基本ユニット（1ターン目）
- 民兵: 基本的な歩兵ユニット（100点）
- 剣士: 攻撃力の高い近接ユニット（110点）
- 弓兵: 遠距離攻撃が得意な兵士（90点）

#### 効果ユニット（2ターン目）
- 騎士: 隣接する味方ユニットの攻撃力を上昇
- 槍兵: 横か縦に敵ユニットが2体並んでいる隣に配置すると攻撃力上昇
- 魔術師: 周囲2マス以内の味方ユニットの攻撃力を上昇
- トロル: 隣接するユニットの攻撃力を減少
- ダークエルフ: 隣接する敵ユニットの攻撃力を上昇

#### フィールドカード（3ターン目）
- 要塞: 周囲1マスの味方ユニットの攻撃力を大幅に上昇させる基地
- 魔法陣: 周囲2マスの味方ユニットに魔力を付与
- 魔界門: 周囲1マスの敵ユニットの攻撃力を大幅に上昇
- 死霊の祭壇: 周囲2マスの敵ユニットに死霊の力を付与

### カード情報の確認
- カードにマウスオーバーすると、詳細情報が表示されます
  - 基礎スコア: カードの基本攻撃力
  - 効果ボーナス: 特殊効果による追加攻撃力
  - 最終スコア: 実際に得られる合計点

### 操作方法
1. 手札からカードを選択します（クリックで選択）
2. フィールドの空いているマスをクリックしてカードを配置します
3. 配置をやり直したい場合は「このターンをやり直す」ボタンを押します
4. 全てのカードを配置すると「次のターンへ」ボタンが表示されます

## プロジェクト構成

```
src/
  ├── app/                    # Next.js アプリケーションのメインディレクトリ
  │   ├── fonts/             # フォントファイル
  │   ├── favicon.ico        # ファビコン
  │   ├── globals.css        # グローバルスタイル
  │   ├── layout.tsx         # レイアウトコンポーネント
  │   └── page.tsx           # メインページコンポーネント
  │
  ├── components/            # 再利用可能なコンポーネント
  │   ├── score/            # スコア関連のコンポーネント
  │   │   ├── AnimatedScore.tsx  # スコアアニメーション
  │   │   ├── index.ts          # エクスポート定義
  │   │   └── ScorePopup.tsx    # スコア詳細ポップアップ
  │   ├── AnimatedCard.tsx   # カードアニメーションコンポーネント
  │   ├── Board.tsx          # ゲームボードコンポーネント
  │   ├── GameStatus.tsx     # ゲーム状態表示コンポーネント
  │   └── TurnTransition.tsx # ターン遷移アニメーション
  │
  ├── constants/            # 定数定義
  │   └── cards.ts         # カード定義
  │
  ├── types/               # 型定義
  │   └── game.ts         # ゲーム関連の型定義
  │
  └── utils/              # ユーティリティ関数
      ├── board.ts        # ボード操作関連
      ├── cards.ts        # カード操作関連
      └── score-calculator.ts # スコア計算関連
```

## 主要なファイルの説明

### コンポーネント
- `Board.tsx`: メインのゲームボードを表示・制御
- `AnimatedCard.tsx`: カードのアニメーション付き表示
- `GameStatus.tsx`: 現在のスコアとゲーム状態を表示
- `TurnTransition.tsx`: ターン切り替え時のアニメーション
- `score/`: スコア関連の表示コンポーネント

### ユーティリティ
- `board.ts`: ボードの状態管理とカード効果の計算
- `cards.ts`: カードの生成とシャッフルロジック
- `score-calculator.ts`: スコア計算ロジック

### 定数と型定義
- `constants/cards.ts`: 全カードの定義データ
- `types/game.ts`: ゲーム全体で使用する型定義

## 開発環境のセットアップ

```bash
# リポジトリのクローン
git clone [リポジトリURL]

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

## 今後の実装予定

- [ ] より多様なカード効果の追加
- [ ] ゲームの難易度設定
- [ ] スコア履歴の保存機能
- [ ] アニメーション効果の追加
- [ ] チュートリアルの実装

## License

MIT