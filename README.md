# Card Battle Game

シンプルなカードバトルゲームです。5x5のフィールドに味方と敵のカードを配置して戦います。

## デモ
[ゲームをプレイする](https://card-battle-game.vercel.app/)

## 技術スタック

- Next.js 14
- TypeScript
- Tailwind CSS
- Framer Motion（アニメーション）

## ゲーム概要

### 基本ルール
- 5x5のフィールドに味方（青）と敵（赤）のカードを配置して戦うゲームです
- 各カードには点数が設定されており、味方カードは味方スコアを、敵カードは敵スコアを上昇させます
- すべてのマスにカードを配置し終えた時点で、味方スコアが敵スコアを上回っていればクリアです

### ゲームの進行
1. 1ターン目：基本ユニット
   - 効果のない基本ユニットカード（民兵、剣士、弓兵など）を4枚引きます
   - 味方2枚、敵2枚のカードが与えられます

2. 2ターン目：効果ユニット
   - 効果付きユニットカード（騎士、槍兵、魔術師など）を4枚引きます
   - 味方2枚、敵2枚のカードが与えられます
   - 各カードには特殊な効果があり、配置や周囲のユニットとの関係で効果を発揮します

3. 3ターン目：フィールドカード
   - フィールドカード（要塞、魔界門など）を2枚引きます
   - 味方1枚、敵1枚のカードが与えられます
   - ユニットに対して広範囲に効果を及ぼすカードで、戦局を大きく変えることができます

### カードの効果
#### 基本ユニット（1ターン目）
効果のない基本ユニットです。点数のみで勝負します。
- 民兵: 基本的な歩兵ユニット（90点）
- 剣士: 攻撃力の高い近接ユニット（120点）
- 弓兵: 遠距離攻撃が得意な兵士（80点）

#### 効果ユニット（2ターン目）
効果は他のユニットにのみ影響を与えます。
- 騎士: 隣接する味方ユニットの攻撃力を上昇（自身130点）
- 槍兵: 横か縦に敵ユニットが2体並んでいる場合、自身の攻撃力上昇（基本100点）
- 盾兵: 味方ユニットが隣接するごとに自身の攻撃力上昇（基本90点）
- トロル: 隣接するユニットの攻撃力を減少（自身160点）
- ダークエルフ: 隣接する敵ユニットの攻撃力を上昇（自身120点）

#### フィールドカード（3ターン目）
フィールドカードは配置されたユニットにのみ効果を与えます。
- 要塞: 周囲1マスの味方ユニットの攻撃力を大幅に上昇（自身60点）
- 魔法陣: 周囲2マスの味方ユニットの攻撃力を上昇（自身80点）
- 魔界門: 周囲1マスの敵ユニットの攻撃力を大幅に上昇（自身160点）
- 死霊の祭壇: 周囲2マスの敵ユニットの攻撃力を上昇（自身110点）

### ゲーム機能
- カードにマウスオーバーすると、詳細情報が表示されます
  - 基礎点: カードの基本攻撃力
  - 効果ボーナス: 特殊効果による追加攻撃力
  - 合計点: 実際に得られる合計点
- 効果範囲のプレビュー表示
  - カードの効果が及ぶ範囲が視覚的に表示されます
  - 青色: 味方への効果
  - 赤色: 敵への効果
- このターンをやり直す機能
  - 手札を使い切った後に利用可能
  - 現在のターンで配置したカードのみを手札に戻します

### 操作方法
1. 手札からカードを選択します（クリックで選択）
2. フィールドの空いているマスをクリックしてカードを配置します
3. 配置をやり直したい場合は、手札を使い切ってから「このターンをやり直す」ボタンを押します
4. 全てのカードを配置すると「次のターンへ」ボタンが表示されます

## 開発環境のセットアップ

```bash
# リポジトリのクローン
git clone [リポジトリURL]

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

## デプロイ
このプロジェクトはVercelにデプロイされています：
1. GitHubリポジトリをVercelと連携
2. mainブランチへのプッシュで自動デプロイ

## プロジェクト構成

```
src/
  ├── app/                    # Next.js アプリケーションのメインディレクトリ
  ├── components/            # 再利用可能なコンポーネント
  │   ├── score/            # スコア関連のコンポーネント
  │   │   ├── AnimatedScore.tsx  # スコアアニメーション
  │   │   ├── index.ts          # エクスポート定義
  │   │   └── ScorePopup.tsx    # スコア詳細ポップアップ
  │   ├── AnimatedCard.tsx   # カードアニメーションコンポーネント
  │   ├── Board.tsx          # ゲームボードコンポーネント
  │   ├── GameStatus.tsx     # ゲーム状態表示コンポーネント
  │   └── TurnTransition.tsx # ターン遷移アニメーション
  ├── constants/            # 定数定義
  │   └── cards.ts         # カード定義
  ├── types/               # 型定義
  │   └── game.ts         # ゲーム関連の型定義
  └── utils/              # ユーティリティ関数
      ├── board.ts        # ボード操作関連
      ├── cards.ts        # カード操作関連
      └── score-calculator.ts # スコア計算関連
```

## 今後の実装予定

- [ ] ゲームの難易度設定（初級・中級・上級）
- [ ] スコア履歴の保存機能
- [ ] エフェクトアニメーションの追加
- [ ] チュートリアルの実装
- [ ] モバイル対応の改善

## License

MIT