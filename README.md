# Card Battle Game

シンプルながら戦略性の高いカードバトルゲームです。5x5のフィールドに味方と敵のカードを配置して戦います。
各カードには固有の効果があり、それらを組み合わせることで高いスコアを狙うことができます。

## デモ
[ゲームをプレイする](https://card-battle-game.vercel.app/)

## 技術スタック

- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Framer Motion（アニメーション）
- shadcn/ui（UIコンポーネント）

## ゲーム概要

### 基本ルール
- 5x5のフィールドに味方（青）と敵（赤）のカードを配置して戦うゲームです
- 各カードには点数が設定されており、味方カードは味方スコアを、敵カードは敵スコアを上昇させます
- すべてのマスにカードを配置し終えた時点で、味方スコアが敵スコアを上回っていればクリアです
- カードには「基礎点」と「効果による追加点」があり、これらの合計がそのカードの最終的な得点となります
- フィールド上のカードの配置によって、カードの効果が変化し、得点が変動します

### ゲームの進行
1. 1ターン目：基本ユニット
   - 効果のない基本ユニットカード（戦士、弓兵など）を6枚引きます
   - 味方3枚、敵3枚のカードが与えられます
   - このターンは純粋な点数勝負となり、基礎固めのターンです

2. 2ターン目：効果ユニット
   - 効果付きユニットカード（騎士、槍兵など）を4枚引きます
   - 味方2枚、敵2枚のカードが与えられます
   - 各カードには周囲のユニットに影響を与える特殊効果があります
   - 1ターン目に配置したカードとの相性を考えて配置することが重要です

3. 3ターン目：フィールドカード
   - フィールドカード（要塞、魔法陣など）を2枚引きます
   - 味方1枚、敵1枚のカードが与えられます
   - 広範囲に効果を及ぼすカードで、戦局を大きく変えることができます
   - 既存のユニットの配置を活かせる場所に配置することが重要です

4. 4ターン目：武器カード
   - 武器カード（聖なる剣、精霊の弓など）を2枚引きます
   - 味方1枚、敵1枚のカードが与えられます
   - 特定のクラスのユニットに対してのみ効果を発揮する特殊なカードです
   - 効果対象となるクラスのユニットの近くに配置することが重要です

5. 5ターン目：支援カード
   - 支援カード（竜騎士隊長、魔導師長など）を4枚引きます
   - 味方2枚、敵2枚のカードが与えられます
   - 複数のクラスに影響を与えたり、武器を強化したりする強力な効果を持ちます
   - ゲームの最終的な勝敗を決める重要なターンです

### ユニットのクラスとその特徴

#### 戦士（Warrior）
- 基本的な近接戦闘ユニット
- 比較的高い基礎点を持つ
- 武器による強化を受けやすい
- 主に前線での戦闘を担当

#### 弓兵（Archer）
- 遠距離攻撃が得意なユニット
- 中程度の基礎点
- 斜め方向の効果を持つカードとの相性が良い
- 後方支援型のユニット

#### 魔法使い（Mage）
- 魔法攻撃を行うユニット
- 効果を活かすことで高得点が狙える
- 魔法陣などのフィールドカードとの相性が良い
- 特殊な効果を持つカードが多い

#### 騎士（Knight）
- 重装甲の騎乗ユニット
- 高い基礎点と強力な効果を持つ
- 他のユニットを支援する効果を持つことが多い
- チームの中核となるユニット

#### 槍兵（Lancer）
- 長槍を使用する特殊ユニット
- 敵の配置に応じて効果を発揮
- 横方向の効果を持つカードとの相性が良い
- 状況に応じた柔軟な運用が可能

### カードの効果システム

#### 基本効果（BaseEffect）
1. 自己強化系
   - `SELF_POWER_UP_BY_ENEMY_LINE`: 横に敵ユニットが2体並んでいる場合、自身の攻撃力上昇
   - `SELF_POWER_UP_BY_ADJACENT_ALLY`: 隣接する味方ユニット1体につき攻撃力上昇

2. 隣接効果
   - `ADJACENT_UNIT_BUFF`: 隣接する味方ユニットの攻撃力を上昇
   - `ADJACENT_UNIT_DEBUFF`: 隣接する全てのユニットの攻撃力を減少

3. フィールド効果
   - `FIELD_UNIT_BUFF`: 周囲の味方ユニットの攻撃力を上昇（範囲指定可能）
   - `FIELD_UNIT_DEBUFF`: 周囲のユニットの攻撃力を減少（範囲指定可能）

4. 列効果
   - `ROW_COLUMN_BUFF`: 縦または横一列の味方ユニットの攻撃力を上昇

5. クラス効果
   - `FIELD_CLASS_POWER_UP`: 特定のクラスのユニットの攻撃力を上昇
   - 複数のクラスに異なる効果を与えることが可能

6. 武器強化
   - `WEAPON_ENHANCEMENT`: 周囲の武器カードの効果を強化

#### 武器効果（WeaponEffect）
1. 方向性効果
   - `VERTICAL_BOOST`: 上下の特定クラスのユニットを強化
   - `HORIZONTAL_BOOST`: 左右の特定クラスのユニットを強化
   - `DIAGONAL_BOOST`: 斜めの特定クラスのユニットを強化

2. 形状効果
   - `CROSS_FORMATION`: 十字の位置にいる特定クラスのユニットを強化
   - `SURROUND_BOOST`: 3体以上の特定クラスのユニットに囲まれている場合に効果発動

### 詳細なカードリスト

#### 基本ユニット（1ターン目）
##### 味方ユニット
- 民兵 (90点)
  - 基本的な戦士ユニット
  - 効果なし
- 剣士 (120点)
  - 攻撃力の高い戦士ユニット
  - 効果なし
- 弓兵 (80点)
  - 遠距離攻撃が得意な兵士
  - 効果なし

##### 敵ユニット
- ゴブリン (110点)
  - 基本的な敵戦士ユニット
  - 効果なし
- オーク (130点)
  - 攻撃力の高い敵戦士ユニット
  - 効果なし
- コボルド (100点)
  - 標準的な敵戦士ユニット
  - 効果なし

#### 効果ユニット（2ターン目）
##### 味方ユニット
- 騎士 (130点)
  - 隣接する味方ユニットの攻撃力+30
  - 支援型ユニット
- 槍兵 (100点)
  - 横に敵ユニットが2体並んでいる場合、攻撃力+60
  - カウンター型ユニット
- 盾兵 (90点)
  - 隣接する味方ユニット1体につき攻撃力+20
  - 防衛型ユニット

##### 敵ユニット
- トロル (160点)
  - 隣接する全てのユニットの攻撃力-20
  - 妨害型ユニット
- ダークエルフ (120点)
  - 隣接する敵ユニットの攻撃力+30
  - 支援型ユニット

#### フィールドカード（3ターン目）
##### 味方カード
- 要塞 (60点)
  - 周囲1マスの味方ユニットの攻撃力+50
  - 防衛拠点として使用
- 魔法陣 (80点)
  - 周囲2マスの味方ユニットの攻撃力+30
  - 広範囲支援型

##### 敵カード
- 魔界門 (160点)
  - 周囲1マスの敵ユニットの攻撃力+50
  - 強力な拠点カード
- 死霊の祭壇 (110点)
  - 周囲2マスの敵ユニットの攻撃力+30
  - 広範囲支援型

#### 武器カード（4ターン目）
##### 味方カード
- 聖なる剣 (40点)
  - 上下の戦士の攻撃力+60
  - 縦方向特化型
- 精霊の弓 (30点)
  - 斜めの弓兵の攻撃力+50
  - 斜め方向特化型
- 賢者の杖 (35点)
  - 十字の魔法使いの攻撃力+55
  - 十字方向特化型
- 精霊の槍 (30点)
  - 左右の槍兵の攻撃力+50
  - 横方向特化型

##### 敵カード
- 混沌の剣 (50点)
  - 上下の戦士の攻撃力+65
  - 強力な縦方向効果
- 死霊の弓 (40点)
  - 斜めの弓兵の攻撃力+55
  - 強力な斜め方向効果
- 闇魔術師の杖 (45点)
  - 十字の魔法使いの攻撃力+60
  - 強力な十字方向効果
- 死霊騎士の槍 (55点)
  - 左右の騎士の攻撃力+75
  - 最強の横方向効果

#### 支援カード（5ターン目）
##### 味方カード
- 竜騎士隊長 (120点)
  - 周囲2マス以内の：
    - 戦士の攻撃力+30
    - 弓兵の攻撃力+20
    - 騎士の攻撃力+25
  - 複数クラス支援型
- 魔導師長 (110点)
  - 周囲2マス以内の：
    - 魔法使いの攻撃力+35
    - 弓兵の攻撃力+25
    - 槍兵の攻撃力+20
  - 魔法特化支援型
- 勝利の旗印 (70点)
  - 縦一列の味方ユニットの攻撃力+30
  - 陣形支援型
- 英雄の詩 (60点)
  - 横一列の味方ユニットの攻撃力+35
  - 陣形支援型
- 武器職人 (80点)
  - 周囲1マスの武器カードの効果+30
  - 武器強化型

##### 敵カード
- 混沌の将軍 (140点)
  - 周囲2マス以内の：
    - 戦士の攻撃力+35
    - 弓兵の攻撃力+25
    - 騎士の攻撃力+30
  - 強力な複数クラス支援型
- 死霊魔導師 (130点)
  - 周囲2マス以内の：
    - 魔法使いの攻撃力+40
    - 槍兵の攻撃力+25
    - 弓兵の攻撃力+20
  - 強力な魔法特化支援型
- 破滅の戦旗 (90点)
  - 縦一列の敵ユニットの攻撃力+35
  - 強力な陣形支援型
- 闇の武器匠 (100点)
  - 周囲1マスの武器カードの効果+35
  - 強力な武器強化型

### ゲームシステムの特徴

#### スコア計算システム
1. 基礎点計算
   - 各カードに設定された基本点数
   - カードの種類やレアリティによって異なる

2. 効果ボーナス計算
   - カードの効果による追加点数
   - 周囲のカードの配置により変動
   - 複数の効果が重なることで高得点を狙える

3. 合計点計算
   - 基礎点と効果ボーナスの合算

### ゲーム機能の詳細

#### ビジュアル効果とUI

##### カード表示システム
1. カードの基本表示
   - カード名
   - クラスアイコン（🗡️戦士、🏹弓兵、🔮魔法使い、🛡️騎士、🔱槍兵）
   - 基礎点数
   - 効果アイコン（該当する場合）
   - カラーコーディング（味方：青系、敵：赤系）

2. 詳細情報ポップアップ
   - マウスオーバーで表示
   - 効果の詳細説明
   - スコアの内訳
     - 基礎点
     - 効果ボーナス（緑色：プラス効果、赤色：マイナス効果）
     - 合計点
   - クラス情報と特性
   - ターン情報

3. カード選択時の表示
   - 選択中カードのハイライト
   - 配置可能マスの表示
   - 予測スコアのプレビュー

##### 効果範囲表示システム
1. エフェクトパターン
   - 隣接効果：十字パターン
   - 範囲効果：円形または矩形パターン
   - 方向性効果：直線パターン
   - 特殊効果：独自のパターン

2. 視覚的フィードバック
   - 半透明オーバーレイ
   - パターン表示
   - 色分け表示
     - 味方効果：青色系統
     - 敵効果：赤色系統
     - デバフ効果：黄色系統

3. アニメーション効果
   - なめらかな表示/非表示の遷移
   - 効果範囲のパルス表示
   - 配置時のエフェクト

##### スコア表示システム
1. リアルタイムスコア更新
   - 味方/敵スコアの常時表示
   - 数値の変動アニメーション
   - 色による変化の表現

2. 変動表示
   - スコア増加：緑色の上向き表示
   - スコア減少：赤色の下向き表示
   - 数値の一時的な強調表示

3. 効果の重なり表示
   - 複数効果の同時表示
   - 合計値の計算表示
   - 効果の優先順位の可視化

#### ゲームの操作性

##### 基本操作フロー
1. カードの選択
   - 手札からカードをクリック
   - 選択中カードのハイライト表示
   - 効果範囲のプレビュー表示

2. カードの配置
   - 配置可能マスの表示
   - クリックで配置
   - 配置時のアニメーション
   - スコア計算と表示更新

3. ターン管理
   - 手札が空になると次のターンボタン表示
   - ターン切り替え時のアニメーション
   - 新しい手札の自動配布

##### 特殊操作
1. やり直し機能
   - 「このターンをやり直す」ボタン
   - 現在のターンの配置をリセット
   - スコアも元に戻る
   - 手札も元の状態に

2. 効果の確認
   - カードへのマウスオーバーで効果範囲表示
   - 既存カードの効果範囲確認
   - 重複する効果の確認

3. スコアのプレビュー
   - 配置前の予測スコア表示
   - 効果の重なり具合の確認
   - 最適な配置位置の判断支援

#### 戦略ガイド

##### 基本戦略
1. 序盤（1-2ターン）
   - 基本ユニットの効率的な配置
   - 後のターンの効果を見据えた布陣
   - 敵の強力なユニットへの対応

2. 中盤（3-4ターン）
   - フィールドカードによる陣形強化
   - 武器カードによるクラス強化
   - 敵の妨害への対策

3. 終盤（5ターン）
   - 支援カードによる総仕上げ
   - 複数の効果を組み合わせた大逆転
   - 最終スコアを見据えた調整

##### 高度な戦術
1. クラスシナジー
   - 同じクラスのユニットをまとめる
   - クラス特化の武器カードの活用
   - 支援カードによる更なる強化

2. 陣形戦略
   - 縦横の列効果を意識
   - 範囲効果の重なりを最大化
   - 敵の効果範囲を避ける

3. コンボ構築
   - 複数の効果を重ねる
   - 武器強化の連鎖
   - クラス効果の最大化

#### プレイのコツ

1. 1ターン目の配置
   - 高得点カードを中心に配置
   - 将来の効果範囲を意識
   - 敵の妨害を避けられる位置を選択

2. 2ターン目の展開
   - 効果ユニットの特性を活かす
   - 既存のユニットとの相乗効果を狙う
   - 敵の効果ユニットへの対策

3. 3ターン目の要所
   - フィールドカードの戦略的配置
   - 広範囲効果の有効活用
   - 敵の強力なフィールドカードへの対応

4. 4ターン目の武器活用
   - クラスに合わせた武器の選択
   - 方向性効果の最適な配置
   - 武器の効果範囲の重ね合わせ

5. 5ターン目の決戦
   - 支援カードによる総合強化
   - 最終的なスコア計算
   - 逆転のチャンスを狙う

### 今後の開発予定

#### 機能拡張予定
1. ゲームプレイの拡張
   - AIプレイヤーの実装
   - 難易度設定の追加
   - チュートリアルモードの実装

2. カードシステムの拡張
   - 新規カードの追加
   - 新しい効果タイプの実装
   - カードのレアリティシステム

3. UI/UX の改善
   - モバイル対応の強化
   - アニメーション効果の追加
   - 効果音とBGMの実装

4. プレイヤー体験の向上
   - スコアランキング機能
   - プレイ履歴の保存
   - 統計情報の表示

#### 技術的な改善予定
1. パフォーマンス最適化
   - レンダリングの効率化
   - 状態管理の改善
   - キャッシュ機能の実装

2. コードの品質向上
   - ユニットテストの追加
   - E2Eテストの実装
   - エラーハンドリングの強化

3. 開発環境の整備
   - CI/CDパイプラインの構築
   - ドキュメント生成の自動化
   - コード品質チェックの自動化

### コントリビューション

プロジェクトへの貢献を歓迎します。以下の手順で参加いただけます：

1. Issue作成
   - バグ報告
   - 機能提案
   - 改善提案

2. Pull Request
   - フォークしてブランチを作成
   - 変更を実装
   - テストを追加
   - PRを作成

3. コーディング規約
   - TypeScriptの型を適切に使用
   - ESLintのルールに従う
   - Prettierでフォーマットを統一
   - コメントを適切に追加

### ライセンス

MIT License

Copyright (c) 2024 Your Name

このプロジェクトは MIT ライセンスの下で公開されています。詳細は LICENSE ファイルをご覧ください。